# Minilibx lib variables
MINLIBXNAME = libmlx.a
MINILIBX	= ./mlx/libmlx.a
MINILIBXDIR	= mlx/
# minilibx flags to link with the required internal macOS API
# -L mlx = ?
# -l mlx = ?
# -framework = ?
# -OpenGL = ?
# -AppKit = ?
MFLAGS	= -L mlx -l mlx -framework OpenGL -framework AppKit
#Program variables
PROGRAM = program.c
CC		= cc
# basic compilation flags
# -I mlx = ?
CFLAGS	= -Wall -Wextra -Werror -Imlx
# program files

SRCS = tester_minilibx.c
OBJ = $(SRC:.c=.o)


all: makelib $(PROGRAM)

makelib:
	@echo "---->COMPILING MINILIBXX LIBRARY..."
	@make -C $(MINILIBXDIR)
	@cp $(MINILIBX) $(MINLIBXNAME)
	@echo "---->MINILIBX LIBRARY COMPILED"


$(PROGRAM): $(OBJS) $(MINILIBXNAME)
	@echo "---->BUILDING PROGRAM..."
	@$(CC) tester_minilibx.c $(MINILIBXNAME) $(MFLAGS) -o $(PROGRAM)
	@echo "---->PROGRAM BUILD."

%.o: %.c Makefile $(MINILIBX)
	$(CC) $(CFLAGS) -Imlx -c $< -o $@

clean:
	@make -C $(MINILIBXDIR) clean
	@rm -f $(PROGRAM)
	@echo "---->OBJECTS CLEANED."

fclean: clean
	@rm -f $(MINILIBX)
	@rm -f $(PROGRAM)
	@echo "---->ALL CLEANED."

re: fclean all

.PHONY: all clean fclean re
